$(document).ready(function(){$("#navleft").click(function(){a.casa?($("#navleft").attr("href","#"),a.casa=null):$("#navleft").attr("href","/wx/user")});var a=new Vue({el:"#app",data:{casas:null,casa:null,total:0},created:function(){this.getcasas()},methods:{getcasas:function(){var a=this;$.getJSON("/wx/api/cardCasaList",function(s){a.casas=s})},getcasa:function(a){var s=this;$.getJSON("/wx/api/cardCasa/"+a,function(a){s.casa=a})},buy:function(){var a=this.chechk();return 3>a?(alert("选择民宿必须大于三家"),!1):void $.ajax("/wx/api/cardCasaBuy",{type:"post",data:{casas:this.casas},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(a){$("body").append(a)}})},plus:function(a){this.total+=this.casas[a].price,this.casas[a].room++},minus:function(a){this.casas[a].room<=0||(this.casas[a].room--,this.total-=this.casas[a].price)},sel:function(a){this.casas[a].room>0?(this.total=this.total-this.casas[a].price*this.casas[a].room,this.casas[a].room=0):(this.total+=this.casas[a].price,this.casas[a].room++)},chechk:function(){var a,s=0;for(a in this.casas)this.casas[a].room>0&&s++;return s}}})});