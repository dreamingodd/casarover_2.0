"use strict";function addRoom(){var o=$($(".room_template")[0].outerHTML);o.css("display","block"),$("#room_container").append(o)}function validateRoom(o){var r=/^[0-9]*$/;return o.name&&o.price?r.test(o.price)?!0:(alert("价格必须为整数字！"),!1):(alert("名称和价格均不能为空！"),!1)}$(function(){0===$("#room_container").children().length&&addRoom(),$(".addRoom").click(function(){addRoom()}),$("#room_container").on("click",".delRoom",function(){deleted&&$(this).parent().remove()}),$(".submit_btn").click(function(){for(var o=[],r=!0,e=$("#room_container .room"),i=0;i<e.length;i++){var n=$(e[i]),t={};if(t.id=n.attr("db_id"),t.name=n.children(".roomNameDiv").children(".roomName").val(),t.price=n.children(".roomPriceDiv").children(".roomPrice").val(),console.log(t),!validateRoom(t)){r=!1;break}o.push(t)}if(r){var a=JSON.stringify(o);console.log(a),$("#wxRooms").val(a),$("#wxRoomForm").submit()}})});