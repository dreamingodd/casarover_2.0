function addRoom(){var o=$($(".room_template")[0].outerHTML);o.css("display","block"),$("#room_container").append(o)}function validateRoom(o){var r=/^[0-9]*$/;return o.name&&o.price?!!r.test(o.price)||(alert("价格必须为整数字！"),!1):(alert("名称和价格均不能为空！"),!1)}$(function(){0===$("#room_container").children().length&&addRoom(),$(".addRoom").click(function(){addRoom()}),$("body").on("click",".delUnsavedRoom",function(){$(this).parent().remove()}),$(".submit_btn").click(function(){for(var o=[],r=!0,e=$("#room_container .room"),i=0;i<e.length;i++){var n=$(e[i]),a={};if(a.id=n.attr("db_id"),a.name=n.children(".roomNameDiv").children(".roomName").val(),a.price=n.children(".roomPriceDiv").children(".roomPrice").val(),console.log(a),!validateRoom(a)){r=!1;break}o.push(a)}if(r){var c=JSON.stringify(o);console.log(c),$("#wxRooms").val(c),$("#wxRoomForm").submit()}})});