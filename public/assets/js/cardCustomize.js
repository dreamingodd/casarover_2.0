function checkParameters(s,a,t){return s?isCellphoneNumber(a)?3>t?(alert("请至少选择三家民宿"),!1):!0:(alert("请输入正确的手机号码！"),!1):(alert("请输入姓名！"),!1)}$(document).ready(function(){new Vue({el:"#app",data:{casas:null,casa:null,total:0,goods:[]},created:function(){this.getcasas()},methods:{getcasas:function(){var s=this;$.getJSON("/wx/api/cardCasaList",function(a){s.casas=a})},getcasa:function(s){var a=this;$.getJSON("/wx/api/cardCasa/"+s,function(s){a.casa=s})},buy:function(){this.goods=[];var s=$("#username").val(),a=$("#cellphone").val(),t=this.selectd().length;checkParameters(s,a,t)&&$.ajax("/wx/api/cardCasaBuy",{type:"post",data:{casas:this.goods,username:s,cellphone:a},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(s){console.log("order create successfully!"),console.log(s),location.href="/wx/pay/wxorder/"+s.orderId}})},plus:function(s){this.total+=this.casas[s].price,this.casas[s].room++},minus:function(s){this.casas[s].room<=0||(this.casas[s].room--,this.total-=this.casas[s].price)},sel:function(s){this.casas[s].room>0?(this.total=this.total-this.casas[s].price*this.casas[s].room,this.casas[s].room=0):(this.total+=this.casas[s].price,this.casas[s].room++)},calculateTotal:function(){for(var s=0,a=0;a<this.casas.length;a++)s+=this.casas[a].price*this.casas[a].room;this.total=s},selectd:function(){for(var s in this.casas)if(this.casas[s].room>0){var a={id:this.casas[s].id,headImg:this.casas[s].headImg,room:this.casas[s].room};this.goods.push(a)}return this.goods}}})});