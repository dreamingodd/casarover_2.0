$(document).ready(function(){new Vue({el:"#main",data:{casas:null,checkedNames:[],selected:2},created:function(){this.getcasa(2)},methods:{getcasa:function(){vm=this,$.getJSON("/api/casa/recom/"+vm.selected,function(e){vm.casas=e,vm.sel()}.bind(vm))},save:function(){vm=this,$.ajax("/api/recom/save",{type:"post",data:{city:vm.selected,casa:vm.checkedNames},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){e.msg&&(alert("保存成功"),vm.sel())}}),vm.checkedNames=[]},sel:function(){vm=this,$.getJSON("/api/home/recom/"+vm.selected,function(e){for(var t=0;t<e.length;t++)vm.checkedNames.push(e[t].id.toString())})}}})});