function total(){totals=0,price=0,counts=0,$(".room").each(function(){"block"==$(this).children(".quantity").css("display")&&(counts=$(this).find(".room_quantity").html(),price=$(this).find(".price").html().replace("￥",""),totals+=parseFloat(counts)*parseFloat(price),console.log(totals))}),$("#totalPayment").html(totals)}$(function(){window.onload=function(){$(".detail").click(function(){$(this).next().toggle(),$(this).children("span").children("em").toggle(),total()}),$(".reduce").click(function(){var t=parseInt($(this).parents(".room").find(".room_quantity").html());return 1>=t?0:($(this).parents(".room").find(".room_quantity").html(--t),void total())}),$(".add").click(function(){var t=parseInt($(this).parents(".room").find(".room_quantity").html());$(this).parents(".room").find(".room_quantity").html(++t),total()})},$("#submitBtn").click(function(){var t=[],o=$("#personName").val(),i=$("#cellphone").val();return $("#totalPayment").html()&&"0"!==$("#totalPayment").html()?o?isCellphoneNumber(i)?($(".room").each(function(){if("block"==$(this).children(".quantity").css("display")){var o={};o.id=$(this).attr("db_id"),o.name=$(this).find(".room_name").html(),o.quantity=$(this).find(".room_quantity").html(),t.push(o)}}),void console.log(t)):void alert("请输入正确的手机号码！"):void alert("请输入姓名！"):void alert("您还没有选择房间/套餐！")})});