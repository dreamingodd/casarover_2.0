$(function(a){a(".flexslider").flexslider({directionNav:!0,pauseOnAction:!1}),a(".show").click(function(){var s="显示全部"==a(this).find("a").html()?"收起":"显示全部";a(this).find("a").html(s),a(this).prev().toggleClass("extend")}),a(".casa a").click(function(){a(".casa a").removeClass(),a(this).addClass("active")})}),window.onload=function(){0==$(this).scrollTop()&&$("#toTop").hide(),$(window).scroll(function(a){$(this).scrollTop()<=100&&$("#toTop").hide(),0!=$(this).scrollTop()&&$("#toTop").show()}),$("#toTop").click(function(a){$("html,body").animate({scrollTop:"0px"},666)}),$(window).scroll(function(){var s=$(window).scrollTop(),i=$(document).height(),t=$(window).height();s>=i-t-180&&a.nextpage(),$(document).height()-$(window).height()-$(window).scrollTop()<170?($("#toTop").css({position:"#absolute",bottom:"330px"}),$("#advice").css({position:"#absolute",bottom:"286px"}),$("#qrcode").css({position:"#absolute",bottom:"242px"})):($("#toTop").css({position:"#fixed",bottom:"138px"}),$("#advice").css({position:"#fixed",bottom:"94px"}),$("#qrcode").css({position:"#fixed",bottom:"50px"}))});var a=new Vue({el:"#app",data:{city:7,areas:[],checkareas:[],casas:[],page:1,casa:null,loading:!1},ready:function(){this.getareas()},methods:{selcity:function(a){this.city=a,this.getareas()},selarea:function(a){var s=a.area.id,i=a.$index;$(".area li:eq("+i+") a").toggleClass("active");var t=this.checkareas.indexOf(s);-1==t?this.checkareas.push(s):this.checkareas.splice(t,1),this.getCasas()},getareas:function(){this.checkareas=[],a=this,$.getJSON("/api/areas/"+a.city,function(s){a.areas=s,this.getCasas()}.bind(a))},getCasas:function(){vmcasas=this,$(".loader").css("display","block");var a=vmcasas.checkareas.toString();$.getJSON("/api/casas/city/"+vmcasas.city+"/areas/"+a,function(a){vmcasas.casas=a.data,$(".loader").css("display","none")}.bind(vmcasas))},nextpage:function(){if(!this.loading){vmcasa=this,$(".loader").css("display","block");var a=vmcasa.checkareas.toString();vmcasa.page++,$.getJSON("/api/casas/city/"+vmcasa.city+"/areas/"+a+"?page="+vmcasa.page,function(a){for(var s=0;s<a.data.length;s++)vmcasa.casa=a.data[s],vmcasa.casas.push(vmcasa.casa),vmcasa.casa=null;$(".loader").css("display","none"),vmcasa.loading=!1}.bind(vmcasa)),vmcasa.loading=!0}}}})};