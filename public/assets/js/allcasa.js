$(function(a){a(".flexslider").flexslider({directionNav:!0,pauseOnAction:!1}),a(".show").click(function(){"显示全部"==a(this).find("a").html()?(a(this).find("a").html("收起"),a(this).prev().addClass("extend")):(a(this).find("a").html("显示全部"),a(this).prev().removeClass("extend"))}),a(".casa a").click(function(){a(".casa a").removeClass(),a(this).addClass("active")})}),window.onload=function(){0==$(this).scrollTop()&&$("#toTop").hide(),$(window).scroll(function(a){$(this).scrollTop()<=100&&$("#toTop").hide(),0!=$(this).scrollTop()&&$("#toTop").show()}),$("#toTop").click(function(a){$("html,body").animate({scrollTop:"0px"},666)}),$(window).scroll(function(){$("#toTop").offset().top,$("footer").offset().top;$(document).height()-$(window).height()-$(window).scrollTop()<170?($("#toTop").css({position:"#absolute",bottom:"330px"}),$("#advice").css({position:"#absolute",bottom:"286px"}),$("#qrcode").css({position:"#absolute",bottom:"242px"})):($("#toTop").css({position:"#fixed",bottom:"138px"}),$("#advice").css({position:"#fixed",bottom:"94px"}),$("#qrcode").css({position:"#fixed",bottom:"50px"}))}),new Vue({el:"#app",data:{city:7,areas:[],checkareas:[],casas:[],page:1,casa:null},created:function(){this.getareas()},ready:function(){},methods:{selcity:function(a){this.city=a,this.getareas()},selarea:function(a){var s=a.area.id,t=a.$index;$(".area li:eq("+t+") a").toggleClass("active");var o=this.checkareas.indexOf(s);-1==o?this.checkareas.push(s):this.checkareas.splice(o,1),this.getCasas()},getareas:function(){this.checkareas=[],vm=this,$.getJSON("/api/areas/"+vm.city,function(a){vm.areas=a,this.getCasas()}.bind(vm))},getCasas:function(){vmcasas=this,$(".loader").css("display","block");var a=vmcasas.checkareas.toString();$.getJSON("/api/casas/city/"+vmcasas.city+"/areas/"+a,function(a){vmcasas.casas=a.data,$(".loader").css("display","none")}.bind(vmcasas))},nextpage:function(){vmcasa=this,$(".loader").css("display","block");var a=vmcasa.checkareas.toString();$.getJSON("/api/casas/city/"+vmcasa.city+"/areas/"+a+"?page=2",function(a){for(var s=0;s<a.data.length;s++)vmcasa.casa=a.data[s],vmcasa.casas.push(vmcasa.casa),vmcasa.casa=null;$(".loader").css("display","none")}.bind(vmcasa))}}})};