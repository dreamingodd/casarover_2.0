function _toConsumableArray(a){if(Array.isArray(a)){for(var s=0,i=Array(a.length);s<a.length;s++)i[s]=a[s];return i}return Array.from(a)}$(function(a){a(".flexslider").flexslider({directionNav:!0,pauseOnAction:!1}),a(".show").click(function(){var s="显示全部"==a(this).find("a").html()?"收起":"显示全部";a(this).find("a").html(s),a(this).prev().toggleClass("extend")}),a(".casa a").click(function(){a(".casa a").removeClass(),a(this).addClass("active")}),a("#qrcode").hover(function(){a("#qrcode span").show()},function(){a("#qrcode span").hide()})}),window.onload=function(){$("#toTop").hide(),$(window).scroll(function(){$(this).scrollTop()<=200?$("#toTop").hide():$("#toTop").show();var s=$(window).scrollTop(),i=$(document).height(),e=$(window).height();170>i-e-s?(a.getCasas(),$(".scroll-back").addClass("top")):$(".scroll-back").removeClass("top")}),$("#toTop").click(function(a){$("html,body").animate({scrollTop:"0px"},666)});var a=new Vue({el:"#app",data:{city:7,areas:[],checkareas:null,casas:[],page:1,loading:!1,areapic:null,banner:{pic:null,title:null,mess:null}},ready:function(){this.getareas()},methods:{selcity:function(a){this.city=a,this.casas=[],this.page=1,this.getareas()},selarea:function(a){var s=a.area.id,i=a.$index;$(".area li a").removeClass("active"),$(".area li:eq("+i+") a").addClass("active"),this.banner.id=this.areas[i].id,this.banner.pic=this.areas[i].pic,this.banner.title=this.areas[i].value,this.banner.mess=this.areas[i].mess,this.checkareas=s,this.page=1,this.casas=[],this.getCasas()},getareas:function(){var a=this;this.checkareas=[],this.banner.pic="",$.getJSON("/api/areas/"+this.city,function(s){a.areas=s,a.getCasas()})},getCasas:function(){var a=this;if(!this.loading){$(".no-more").css("display","none"),$(".loader").css("display","block");var s=this.checkareas.toString();s&&(s="/"+s),$.getJSON("/api/casas/city/"+this.city+"/areas"+s+"?page="+this.page,function(s){0==s.data.length&&$(".no-more").css("display","block"),a.casas=[].concat(_toConsumableArray(a.casas),_toConsumableArray(s.data)),$(".loader").css("display","none"),a.loading=!1}),this.loading=!0,this.page++}}}})};